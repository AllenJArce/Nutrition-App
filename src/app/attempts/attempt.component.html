<!-- TODO: can put [formGroup] in mat-form-field -->

<mat-card>


  <table mat-table [dataSource]="dataSource">
    <ng-container matColumnDef="mealOne">
      <th mat-header-cell *matHeaderCellDef>Meal 1</th>
      <td mat-cell *matCellDef="let element">
        <form>
          <mat-form-field [formGroup]="mealOne">
            <input
              type="text"
              matInput
              placeholder="Choose a carb"
              formControlName="carbGroup"
              required
              [matAutocomplete]="autoGroup"
            />
            <mat-autocomplete #autoGroup="matAutocomplete">
              <mat-optgroup
                *ngFor="let group of (carbGroupOptions | async)"
                [label]="group.type"
              >
                <mat-option
                  *ngFor="let foodNames of group.food"
                  [value]="food"
                >
                  {{ food }}
                </mat-option>
              </mat-optgroup>
            </mat-autocomplete>
          </mat-form-field>

          <!-- Meal One: Protein -->

          <div>
            <mat-form-field [formGroup]="mealOne">
              <input
                type="text"
                matInput
                placeholder="Choose a protein"
                formControlName="proteinGroup"
                required
                [matAutocomplete]="autoProteinGroup"
              />
              <mat-autocomplete #autoProteinGroup="matAutocomplete">
                <mat-optgroup
                  *ngFor="let group of (proteinGroupOptions | async)"
                  [label]="group.proteinType"
                >
                  <mat-option
                    *ngFor="let proteinFoodNames of group.proteinFoodNames"
                    [value]="proteinFoodNames"
                  >
                    {{ proteinFoodNames }}
                  </mat-option>
                </mat-optgroup>
              </mat-autocomplete>
            </mat-form-field>
          </div>

          <!-- Meal One: Fruits -->

          <div>
            <mat-form-field [formGroup]="mealOne">
              <input
                type="text"
                matInput
                placeholder="Choose a fruit"
                formControlName="fruitGroup"
                required
                [matAutocomplete]="autoFruitGroup"
              />
              <mat-autocomplete #autoFrutiGroup="matAutocomplete">
                <mat-optgroup
                  *ngFor="let group of (fruitGroupOptions | async)"
                  [label]="group.fruitType"
                >
                  <mat-option
                    *ngFor="let fruitFoodNames of group.fruitFoodNames"
                    [value]="fruitFoodNames"
                  >
                    {{ fruitFoodNames }}
                  </mat-option>
                </mat-optgroup>
              </mat-autocomplete>
            </mat-form-field>
          </div>
        </form>
      </td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="exchanges">
      <th mat-header-cell *matHeaderCellDef>Number of Exchanges</th>
      <td mat-cell *matCellDef="let food">{{ food.exchanges }}</td>
      <td mat-cell *matCellDef="let food">{{ food.exchanges }}</td>
      <td mat-cell *matCellDef="let food">{{ food.exchanges }}</td>
      <td mat-cell *matCellDef="let food">{{ food.exchanges }}</td>
    </ng-container>

    <!-- Weight Column -->
    <ng-container matColumnDef="carbs">
      <th mat-header-cell *matHeaderCellDef>Carbs</th>
      <td mat-cell *matCellDef="let food">{{ food.numMCarbs }}</td>
    </ng-container>

    <!-- Symbol Column -->
    <ng-container matColumnDef="protein">
      <th mat-header-cell *matHeaderCellDef>Protein</th>
      <td mat-cell *matCellDef="let food">{{ food.numProtein }}</td>
    </ng-container>

    <ng-container matColumnDef="fat">
      <th mat-header-cell *matHeaderCellDef>Fat</th>
      <td mat-cell *matCellDef="let food">{{ food.fat }}</td>
    </ng-container>

    <ng-container matColumnDef="kCals">
      <th mat-header-cell *matHeaderCellDef>Kcals</th>
      <td mat-cell *matCellDef="let food">{{ food.kCals }}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</mat-card>

<!-- <mat-card>
  <table mat-table [dataSource]="dataSource">
    <ng-container matColumnDef="carbs">
      <th mat-header-cell *matHeaderCellDef>Carbs</th>
      <td mat-cell *matCellDef="let meal of carbs"> {{ meal.carbs.type }}</td>
        </ng-container>

    <ng-container matColumnDef="protein">
      <th mat-header-cell *matHeaderCellDef>Protein</th>
      <td mat-cell *matCellDef="let meal">{{ meal.proteins.food }}</td>
    </ng-container>


    <ng-container matColumnDef="fruit">
        <th mat-header-cell *matHeaderCellDef>Fruit</th>
        <td mat-cell *matCellDef="let meal">{{ meal.fruit.food }}</td>
      </ng-container>

    <ng-container matColumnDef="fat">
        <th mat-header-cell *matHeaderCellDef>Fat</th>
        <td mat-cell *matCellDef="let meal">{{ meal.fat.food }}</td>
      </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</mat-card> -->

<!-- Simple example, no filtering! -->

<!-- <form >
    <mat-form-field [formGroup] ="mealOne">
      <input
        type="text"
        matInput
        placeholder="Choose a carb"
        formControlName="carbGroup"
        required
        [matAutocomplete]="autoGroup"
      />
      <mat-autocomplete #autoGroup="matAutocomplete">
        <mat-optgroup
          *ngFor="let group of carbGroups"
          [label]="group.type"
        >
          <mat-option
            *ngFor="let foodNames of group.foodNames"
            [value]="foodNames"
          >
            {{ foodNames }}
          </mat-option>
        </mat-optgroup>
      </mat-autocomplete>
    </mat-form-field>


    <div>
      <mat-form-field [formGroup] ="mealOne">
        <input
          type="text"
          matInput
          placeholder="Choose a protein"
          formControlName="proteinGroup"
          required
          [matAutocomplete]="autoProteinGroup"
        />
        <mat-autocomplete #autoProteinGroup="matAutocomplete">
          <mat-optgroup
            *ngFor="let group of proteinGroups"
            [label]="group.proteinType"
          >
            <mat-option
              *ngFor="let proteinFoodNames of group.proteinFoodNames"
              [value]="proteinFoodNames"
            >
              {{ proteinFoodNames }}
            </mat-option>
          </mat-optgroup>
        </mat-autocomplete>
      </mat-form-field>
    </div>
  </form> -->
